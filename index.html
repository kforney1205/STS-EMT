<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>HTML CSS Register Form</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js" type="text/javascript"></script>
  </head>
  <body>
    <form class="signup-form" onsubmit="vidSessionRedirect(); return false">

      <!-- form header -->
      <div class="form-header">
        <h1>STS - New Case Form</h1>
      </div>

      <!-- form body -->
      <div class="form-body">

        <!-- EMT Version -->

        <div class="form-group">
          <label for="casenumber" class="label-title">Case/Run Number *</label><br>
          <button class="btn" type="button" onclick="document.getElementById('casenumber').value = getRndInteger(100001,999999999)">Get Case #</button>
          <input type="text" id="casenumber" class="form-input-multi" maxlength="9" placeholder="Insert Case Number" required="required">
        </div>

        <div class="form-group">
         <label class="label-title">Case Type *</label>
            <select class="form-input" id="level">
              <option value="NoneSelected">-----</option>
              <option value="Urgent">Urgent</option>
              <option value="Priority">Priority</option>
              <option value="Routine">Routine</option>
            </select>
        </div>
  
        <div class="horizontal-group">
          <div class="form-group left">
            <label for="firstname" class="label-title">Patient First Name *</label>
            <input type="text" id="firstname" class="form-input" placeholder="Given Name" required="required" />
          </div>
          <div class="form-group right">
            <label for="lastname" class="label-title">Patient Last Name *</label>
            <input type="text" id="lastname" class="form-input" placeholder="Surname" required="required"/>
          </div>
        </div> 

        <div class="horizontal-group">
          <div class="form-group left">
            <label class="label-title">Gender:</label>
            <div class="input-group">
              <label for="male"><input type="radio" name="gender" value="male" id="male"> Male</label>
              <label for="female"><input type="radio" name="gender" value="female" id="female"> Female</label>
            </div>
          </div>
          <div class="form-group right">
            <label class="label-title">Date of Birth:*</label>
            <div class="input-group">
            <select id="day" name="day" class="form-input-mini"><option value="0">Day</option></select>
            <select id="month" name="month" class="form-input-mini"><option value="0">Month</option></select>
            <select id="year" name="year" class="form-input-mini"><option value="0">Year</option></select>
          </div>
          </div>
        </div>

        <div class="form-group">
          <label for="email" class="label-title">Patient Email:*</label>
          <input type="email" id="email" class="form-input" required="required" placeholder="Patient Email Contact:">
        </div>

        <div class="form-group">
          <label for="contactnum" class="label-title">Patient Phone Number:*</label>
          <input type="contactnum" id="contactnum" class="form-input" required="required" placeholder="Patient Phone Number:">
        </div>

         <div class="form-group">
          <label for="mrn" class="label-title">MRN Number:</label>
          <input type="mrn" id="mrn" class="form-input" placeholder="MRN">
        </div>

          <div class="form-group">
          <label for="chiefcomplaint" class="label-title">Chief Complaint:</label>
          <textarea id="chiefcomplaint" name="chiefcomplaint" class="form-input-texarea" placeholder="Describe the reason for the interaction" rows="10" cols="50"></textarea>
        </div>
      </div> 

      <!-- form-footer -->
       <div class="form-footer">
        <span>* required</span>
        <button type="submit" class="btn" onclick="vidSessionRedirect();">Submit and Launch Call</button>
      </div>

    </form> 

    <!-- Script for range input label -->
    <script>
      var rangeLabel = document.getElementById("range-label");
      var experience = document.getElementById("experience");

      function change() {
      rangeLabel.innerText = experience.value + "K";
      }

      function getRndInteger(min, max) {
      return Math.floor(Math.random() * (max - min + 1) ) + min;
      }


(function () {
    let day_selected = (new Date).getDate(); // current day
    let option = '';
    option = '<option>Day</option>'; // first option

    for (let i = 1; i < 32; i++) {
        // value day number with 0. 01 02 03 04..
        let day = (i <= 9) ? '0' + i : i;

        // or value day number 1 2 3 4..
        // let day = i;

        let selected = (i === day_selected ? ' selected' : '');
        option += '<option value="' + day + '"' + selected + '>' + day + '</option>';
    }
    document.getElementById("day").innerHTML = option;
})();

      

      (function () {
    let months = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
    var month_selected = (new Date).getMonth(); // current month
    var option = '';
    option = '<option>Month</option>'; // first option

    for (let i = 0; i < months.length; i++) {
        let month_number = (i + 1);

        // value month number with 0. [01 02 03 04..]
        let month = (month_number <= 9) ? '0' + month_number : month_number;

        // or value month number. [1 2 3 4..]
        // let month = month_number;

        // or value month names. [January February]
        // let month = months[i];

        let selected = (i === month_selected ? ' selected' : '');
        option += '<option value="' + month + '"' + selected + '>' + months[i] + '</option>';
    }
    document.getElementById("month").innerHTML = option;
})();


(function () {
    let year_satart = 1910;
    let year_end = (new Date).getFullYear(); // current year
    let year_selected = "Year";

    let option = '';
    option = '<option>Year</option>'; // first option

    for (let i = year_satart; i <= year_end; i++) {
        let selected = (i === year_selected ? ' selected' : '');
        option += '<option value="' + i + '"' + selected + '>' + i + '</option>';
    }

    document.getElementById("year").innerHTML = option;
})();

function vidSessionRedirect(){

    window.location.href=('https://xmb-hc.pex-gcc.com/webapp/#/?conference=mp' + document.getElementById("casenumber").value +'&name=' + document.getElementById("firstname").value + '%20' + document.getElementById("lastname").value + '&callType=video&role=guest');

}

    </script>

  </body>
</html>
